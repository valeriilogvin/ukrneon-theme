!function (e) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define([], e); else { ("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this).LgZoom = e() } }(function () { return function () { return function e(t, o, r) { function i(a, s) { if (!o[a]) { if (!t[a]) { var n = "function" == typeof require && require; if (!s && n) return n(a, !0); if (l) return l(a, !0); var u = new Error("Cannot find module '" + a + "'"); throw u.code = "MODULE_NOT_FOUND", u } var c = o[a] = { exports: {} }; t[a][0].call(c.exports, function (e) { return i(t[a][1][e] || e) }, c, c.exports, e, t, o, r) } return o[a].exports } for (var l = "function" == typeof require && require, a = 0; a < r.length; a++)i(r[a]); return i } }()({ 1: [function (e, t, o) { !function (e, t) { if (void 0 !== o) t(); else { t(), e.lgZoom = {} } }(this, function () { "use strict"; var e, t, o = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var o = arguments[t]; for (var r in o) Object.prototype.hasOwnProperty.call(o, r) && (e[r] = o[r]) } return e }, r = { scale: 1, zoom: !0, actualSize: !0, enableZoomAfter: 300, useLeftForZoom: (e = !1, t = navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./), t && parseInt(t[2], 10) < 54 && (e = !0), e) }, i = function (e) { return this.el = e, this.core = window.lgData[this.el.getAttribute("lg-uid")], this.core.s = o({}, r, this.core.s), this.core.s.zoom && this.core.doCss() && (this.init(), this.zoomabletimeout = !1, this.pageX = window.innerWidth / 2, this.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop)), this }; i.prototype.init = function () { var e = this, t = '<button type="button" aria-label="Zoom in" id="lg-zoom-in" class="lg-icon"></button><button type="button" aria-label="Zoom out" id="lg-zoom-out" class="lg-icon"></button>'; e.core.s.actualSize && (t += '<button type="button" aria-label="Actual size" id="lg-actual-size" class="lg-icon"></button>'), e.core.s.useLeftForZoom ? utils.addClass(e.core.outer, "lg-use-left-for-zoom") : utils.addClass(e.core.outer, "lg-use-transition-for-zoom"), this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend", t), utils.on(e.core.el, "onSlideItemLoad.lgtmzoom", function (t) { var o = e.core.s.enableZoomAfter + t.detail.delay; utils.hasClass(document.body, "lg-from-hash") && t.detail.delay ? o = 0 : utils.removeClass(document.body, "lg-from-hash"), e.zoomabletimeout = setTimeout(function () { utils.addClass(e.core.___slide[t.detail.index], "lg-zoomable") }, o + 30) }); var o = 1, r = function (t) { var o = e.core.outer.querySelector(".lg-current .lg-image"), r = (window.innerWidth - o.clientWidth) / 2, i = (window.innerHeight - o.clientHeight) / 2 + (document.documentElement.scrollTop || document.body.scrollTop), l = (t - 1) * (e.pageX - r), a = (t - 1) * (e.pageY - i); utils.setVendor(o, "Transform", "scale3d(" + t + ", " + t + ", 1)"), o.setAttribute("data-scale", t), e.core.s.useLeftForZoom ? (o.parentElement.style.left = -l + "px", o.parentElement.style.top = -a + "px") : utils.setVendor(o.parentElement, "Transform", "translate3d(-" + l + "px, -" + a + "px, 0)"), o.parentElement.setAttribute("data-x", l), o.parentElement.setAttribute("data-y", a) }, i = function () { o > 1 ? utils.addClass(e.core.outer, "lg-zoomed") : e.resetZoom(), o < 1 && (o = 1), r(o) }, l = function (t, r, l, a) { var s, n = r.clientWidth; s = e.core.s.dynamic ? e.core.s.dynamicEl[l].width || r.naturalWidth || n : e.core.items[l].getAttribute("data-width") || r.naturalWidth || n, utils.hasClass(e.core.outer, "lg-zoomed") ? o = 1 : s > n && (o = s / n || 2), a ? (e.pageX = window.innerWidth / 2, e.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop)) : (e.pageX = t.pageX || t.targetTouches[0].pageX, e.pageY = t.pageY || t.targetTouches[0].pageY), i(), setTimeout(function () { utils.removeClass(e.core.outer, "lg-grabbing"), utils.addClass(e.core.outer, "lg-grab") }, 10) }, a = !1; utils.on(e.core.el, "onAferAppendSlide.lgtmzoom", function (t) { var o = t.detail.index, r = e.core.___slide[o].querySelector(".lg-image"); e.core.isTouch || utils.on(r, "dblclick", function (e) { l(e, r, o) }), e.core.isTouch && utils.on(r, "touchstart", function (e) { a ? (clearTimeout(a), a = null, l(e, r, o)) : a = setTimeout(function () { a = null }, 300), e.preventDefault() }) }), utils.on(window, "resize.lgzoom scroll.lgzoom orientationchange.lgzoom", function () { e.pageX = window.innerWidth / 2, e.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop), r(o) }), utils.on(document.getElementById("lg-zoom-out"), "click.lg", function () { e.core.outer.querySelector(".lg-current .lg-image") && (o -= e.core.s.scale, i()) }), utils.on(document.getElementById("lg-zoom-in"), "click.lg", function () { e.core.outer.querySelector(".lg-current .lg-image") && (o += e.core.s.scale, i()) }), utils.on(document.getElementById("lg-actual-size"), "click.lg", function (t) { l(t, e.core.___slide[e.core.index].querySelector(".lg-image"), e.core.index, !0) }), utils.on(e.core.el, "onBeforeSlide.lgtm", function () { o = 1, e.resetZoom() }), e.core.isTouch || e.zoomDrag(), e.core.isTouch && e.zoomSwipe() }, i.prototype.getModifier = function (e, t, o) { var r = e; e = Math.abs(e); var i = this.getCurrentTransform(o); if (!i) return 1; var l = 1; if ("X" === t) { var a = Math.sign(parseFloat(i[0])); 0 === e || 180 === e ? l = 1 : 90 === e && (l = -90 === r && 1 === a || 90 === r && -1 === a ? -1 : 1), l *= a } else { var s = Math.sign(parseFloat(i[3])); if (0 === e || 180 === e) l = 1; else if (90 === e) { var n = parseFloat(i[1]), u = parseFloat(i[2]); l = Math.sign(n * u * r * s) } l *= s } return l }, i.prototype.getImageSize = function (e, t, o) { return 90 === t && (o = "x" === o ? "y" : "x"), e[{ y: "offsetHeight", x: "offsetWidth" }[o]] }, i.prototype.getDragCords = function (e, t) { return 90 === t ? { x: e.pageY, y: e.pageX } : { x: e.pageX, y: e.pageY } }, i.prototype.getSwipeCords = function (e, t) { var o = e.targetTouches[0].pageX, r = e.targetTouches[0].pageY; return 90 === t ? { x: r, y: o } : { x: o, y: r } }, i.prototype.getPossibleDragCords = function (e, t) { var o = (this.core.outer.querySelector(".lg").clientHeight - this.getImageSize(e, t, "y")) / 2, r = Math.abs(this.getImageSize(e, t, "y") * Math.abs(e.getAttribute("data-scale")) - this.core.outer.querySelector(".lg").clientHeight + o), i = (this.core.outer.querySelector(".lg").clientWidth - this.getImageSize(e, t, "x")) / 2, l = Math.abs(this.getImageSize(e, t, "x") * Math.abs(e.getAttribute("data-scale")) - this.core.outer.querySelector(".lg").clientWidth + i); return 90 === t ? { minY: i, maxY: l, minX: o, maxX: r } : { minY: o, maxY: r, minX: i, maxX: l } }, i.prototype.getDragAllowedAxises = function (e, t) { var o = this.getImageSize(e, t, "y") * e.getAttribute("data-scale") > this.core.outer.querySelector(".lg").clientHeight, r = this.getImageSize(e, t, "x") * e.getAttribute("data-scale") > this.core.outer.querySelector(".lg").clientWidth; return 90 === t ? { allowX: o, allowY: r } : { allowX: r, allowY: o } }, i.prototype.getCurrentTransform = function (e) { if (!e) return 0; var t = window.getComputedStyle(e, null), o = t.getPropertyValue("-webkit-transform") || t.getPropertyValue("-moz-transform") || t.getPropertyValue("-ms-transform") || t.getPropertyValue("-o-transform") || t.getPropertyValue("transform") || "none"; return "none" !== o ? o.split("(")[1].split(")")[0].split(",") : 0 }, i.prototype.getCurrentRotation = function (e) { if (!e) return 0; var t = this.getCurrentTransform(e); return t ? Math.round(Math.atan2(t[1], t[0]) * (180 / Math.PI)) : 0 }, i.prototype.resetZoom = function () { utils.removeClass(this.core.outer, "lg-zoomed"); for (var e = 0; e < this.core.___slide.length; e++)this.core.___slide[e].querySelector(".lg-img-wrap") && (this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("style"), this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-x"), this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-y")); for (var t = 0; t < this.core.___slide.length; t++)this.core.___slide[t].querySelector(".lg-image") && (this.core.___slide[t].querySelector(".lg-image").removeAttribute("style"), this.core.___slide[t].querySelector(".lg-image").removeAttribute("data-scale")); this.pageX = window.innerWidth / 2, this.pageY = window.innerHeight / 2 + (document.documentElement.scrollTop || document.body.scrollTop) }, i.prototype.zoomSwipe = function () { for (var e, t = this, o = {}, r = {}, i = !1, l = !1, a = !1, s = 0, n = 0; n < t.core.___slide.length; n++)utils.on(t.core.___slide[n], "touchstart.lg", function (r) { if (utils.hasClass(t.core.outer, "lg-zoomed")) { var i = t.core.___slide[t.core.index].querySelector(".lg-object"); e = t.core.___slide[t.core.index].querySelector(".lg-img-rotate"), s = t.getCurrentRotation(e); var n = t.getDragAllowedAxises(i, Math.abs(s)); a = n.allowY, ((l = n.allowX) || a) && (r.preventDefault(), o = t.getSwipeCords(r, Math.abs(s))) } }); for (var u = 0; u < t.core.___slide.length; u++)utils.on(t.core.___slide[u], "touchmove.lg", function (n) { if (utils.hasClass(t.core.outer, "lg-zoomed")) { var u, c, g = t.core.___slide[t.core.index].querySelector(".lg-img-wrap"); n.preventDefault(), i = !0, r = t.getSwipeCords(n, Math.abs(s)), utils.addClass(t.core.outer, "lg-zoom-dragging"), c = a ? -Math.abs(g.getAttribute("data-y")) + (r.y - o.y) * t.getModifier(s, "Y", e) : -Math.abs(g.getAttribute("data-y")), u = l ? -Math.abs(g.getAttribute("data-x")) + (r.x - o.x) * t.getModifier(s, "X", e) : -Math.abs(g.getAttribute("data-x")), (Math.abs(r.x - o.x) > 15 || Math.abs(r.y - o.y) > 15) && (t.core.s.useLeftForZoom ? (g.style.left = u + "px", g.style.top = c + "px") : utils.setVendor(g, "Transform", "translate3d(" + u + "px, " + c + "px, 0)")) } }); for (var c = 0; c < t.core.___slide.length; c++)utils.on(t.core.___slide[c], "touchend.lg", function () { utils.hasClass(t.core.outer, "lg-zoomed") && i && (i = !1, utils.removeClass(t.core.outer, "lg-zoom-dragging"), t.touchendZoom(o, r, l, a, s)) }) }, i.prototype.zoomDrag = function () { for (var e, t = this, o = {}, r = {}, i = !1, l = !1, a = !1, s = !1, n = 0, u = 0; u < t.core.___slide.length; u++)utils.on(t.core.___slide[u], "mousedown.lgzoom", function (r) { var l = t.core.___slide[t.core.index].querySelector(".lg-object"); e = t.core.___slide[t.core.index].querySelector(".lg-img-rotate"), n = t.getCurrentRotation(e); var u = t.getDragAllowedAxises(l, Math.abs(n)); s = u.allowY, a = u.allowX, utils.hasClass(t.core.outer, "lg-zoomed") && utils.hasClass(r.target, "lg-object") && (a || s) && (r.preventDefault(), o = t.getDragCords(r, Math.abs(n)), i = !0, t.core.outer.scrollLeft += 1, t.core.outer.scrollLeft -= 1, utils.removeClass(t.core.outer, "lg-grab"), utils.addClass(t.core.outer, "lg-grabbing")) }); utils.on(window, "mousemove.lgzoom", function (u) { if (i) { var c, g, d = t.core.___slide[t.core.index].querySelector(".lg-img-wrap"); l = !0, r = t.getDragCords(u, Math.abs(n)), utils.addClass(t.core.outer, "lg-zoom-dragging"), g = s ? -Math.abs(d.getAttribute("data-y")) + (r.y - o.y) * t.getModifier(n, "Y", e) : -Math.abs(d.getAttribute("data-y")), c = a ? -Math.abs(d.getAttribute("data-x")) + (r.x - o.x) * t.getModifier(n, "X", e) : -Math.abs(d.getAttribute("data-x")), t.core.s.useLeftForZoom ? (d.style.left = c + "px", d.style.top = g + "px") : utils.setVendor(d, "Transform", "translate3d(" + c + "px, " + g + "px, 0)") } }), utils.on(window, "mouseup.lgzoom", function (e) { i && (i = !1, utils.removeClass(t.core.outer, "lg-zoom-dragging"), !l || o.x === r.x && o.y === r.y || (r = t.getDragCords(e, Math.abs(n)), t.touchendZoom(o, r, a, s, n)), l = !1), utils.removeClass(t.core.outer, "lg-grabbing"), utils.addClass(t.core.outer, "lg-grab") }) }, i.prototype.touchendZoom = function (e, t, o, r, i) { var l = this.core.___slide[this.core.index].querySelector(".lg-img-wrap"), a = this.core.___slide[this.core.index].querySelector(".lg-object"), s = this.core.___slide[this.core.index].querySelector(".lg-img-rotate"), n = -Math.abs(l.getAttribute("data-x")) + (t.x - e.x) * this.getModifier(i, "X", s), u = -Math.abs(l.getAttribute("data-y")) + (t.y - e.y) * this.getModifier(i, "Y", s), c = this.getPossibleDragCords(a, Math.abs(i)); (Math.abs(t.x - e.x) > 15 || Math.abs(t.y - e.y) > 15) && (r && (u <= -c.maxY ? u = -c.maxY : u >= -c.minY && (u = -c.minY)), o && (n <= -c.maxX ? n = -c.maxX : n >= -c.minX && (n = -c.minX)), r ? l.setAttribute("data-y", Math.abs(u)) : u = -Math.abs(l.getAttribute("data-y")), o ? l.setAttribute("data-x", Math.abs(n)) : n = -Math.abs(l.getAttribute("data-x")), this.core.s.useLeftForZoom ? (l.style.left = n + "px", l.style.top = u + "px") : utils.setVendor(l, "Transform", "translate3d(" + n + "px, " + u + "px, 0)")) }, i.prototype.destroy = function () { utils.off(this.core.el, ".lgzoom"), utils.off(window, ".lgzoom"); for (var e = 0; e < this.core.___slide.length; e++)utils.off(this.core.___slide[e], ".lgzoom"); utils.off(this.core.el, ".lgtmzoom"), this.resetZoom(), clearTimeout(this.zoomabletimeout), this.zoomabletimeout = !1 }, window.lgModules.zoom = i }) }, {}] }, {}, [1])(1) });